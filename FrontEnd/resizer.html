<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Layui</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="./layui/css/layui.css"  media="all">
</head>

<style type="text/css">
  .toast {
   display: none;
   position: fixed;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   width:5rem;
   height: 5rem;
   left: 50%;
   top: 50%;
   transform: translate(-50%, -50%);
   background-color: #4A4A4B;
   border-radius: 1rem;
   color: #f0f0f0;
   font-size: 0.8rem;
   opacity: 0.3;
  }
  .load {
   display: inline-block;
   margin-bottom: 0.5rem;
   height: 2rem;
   width: 2rem;
   border: 0.2rem solid transparent;
   border-top-color: white;
   border-left-color: white;
   border-bottom-color: white;
   animation: circle 1s infinite linear;
   -webkit-animation: circle 1s infinite linear; /* Safari 和 Chrome */
   border-radius: 50%
  }
 
  @-webkit-keyframes circle {
   0% {
    transform: rotate(0deg);
   }
   100% {
    transform: rotate(-360deg)
   }
  }
 </style>
<body>



<div id="container" style="width:100%;">
<ul class="layui-nav"  lay-filter="">
  <li class="layui-nav-item">
    <a href=""><img src="//t.cn/RCzsdCq" class="layui-nav-img">登录</a>
    <dl class="layui-nav-child">
      <dd><a href="javascript:;">修改信息</a></dd>
      <dd><a href="javascript:;">安全管理</a></dd>
      <dd><a href="javascript:;">退出</a></dd>
    </dl>
  </li>
  <li class="layui-nav-item"><a href="./text_to_img.html">文字转图片</a></li>
  <li class="layui-nav-item layui-this"><a href="./resizer.html">图片调整</a></li>
  <li class="layui-nav-item"><a href="./match.html">图片匹配</a></li>
</ul>

<div id="menu" style="background-color:#DCDCDC;width:30%;height:650px;float:left;">
  <div style="margin-top: 20px;text-align: center"><b>Options</b></div>
  <!-- <div class="layui-form-item" style="margin-top: 20px;">  -->
   <!-- <label class="layui-form-label">Models  </label> -->
    <!-- <div class="layui-input-block">
      <select name="Model to Interpret" lay-filter="aihao">
        <option value="" selected="">请选择</option>
        <option value="0">0</option>
        <option value="1">1</option>m
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </div> -->
  <!-- </div> -->
  <div class="layui-form-item" style="margin-top: 20px;">
   <label class="layui-form-label">Layers </label>
    <div class="layui-input-block">
      <select name="Model to Interpret" lay-filter="layers_idx" id='select'>
        <option value="" selected="">请选择</option>
        <option value="all">all</option>
        <option value="0-1">0-1</option>
        <option value="2-5">2-5</option>
        <option value="6-13">6-13</option>
      </select>
    </div>
  </div>
  <!-- <form action="">
  number<br>
  <input type="number" id="b" value="50">
  </form> -->
  <div style="margin-top: 20px;margin-left:10px">参数一
    <div id="slideTest1" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数二
    <div id="slideTest2" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数三
    <div id="slideTest3" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数四
    <div id="slideTest4" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数五
    <div id="slideTest5" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数六
    <div id="slideTest6" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数七
    <div id="slideTest7" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数八
    <div id="slideTest8" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数九
    <div id="slideTest9" class="demo-slider"></div>
  </div>
  <div style="margin-top: 20px;margin-left:10px">参数十
    <div id="slideTest10" class="demo-slider"></div>
  </div>
  <div class="site-demo-button" style="margin-top:30px;margin-left:70px">
   <button id="PostButton" type="button" class="layui-btn layui-btn-normal" >开始调整</button>
  
      <button id="PostButton2" type="button" class="layui-btn layui-btn-normal" >下一步</button>
    </a>
  </div>

  <!-- <div class="layui-progress layui-progress-big" lay-showpercent="true" lay-filter="demo" style="margin-top:10px;">
  <div class="layui-progress-bar layui-bg-red" lay-percent="0%"></div>
  </div> -->
  <div class="toast">
    <span class="load"></span>
    <span>加载中...</span>
    </div>
  
    </div>
  </div >

<!-- <div id="content" style="width:70%;height:420px;float:left;">
<div class="layui-upload-drag" id="test10" style="width:93%;height:500px;">
  <img src="" alt="文字转图片成功后渲染">
</div>
</div> -->

<img id="ImagePic" alt="文字转图片成功后渲染" style="width:70%;max-height:650px;float:left;">
</div>


  <!-- <a href="match.html" class="layui-btn layui-btn-fluid" style="width:370px;margin:170px;margin-top:200px">下一步</a> -->
  
</div>
<script src="./layui/layui.js" charset="utf-8"></script>
<script src="./layui/jquery-3.6.0.js" charset="utf-8"></script>
<script>

var v1=5,v2=5,v3=5,v4=5,v5=5,v6=5,v7=5,v8=5,v9=5,v10=5;     //滑块初始值为5
var layer_index=null;   //layers初始值为all
// var picURL='./img/test_ori.jpg';
var picURL=null;
var str=null;

// layui.use('form', function(){
//   var form = layui.form;

//    form.on('select(layers_idx)', function (data) {
//     layer_index = data.value;
//     form.render('select'); 
//   })

//   });

layui.use('slider', function(){
  var $ = layui.$
  ,slider = layui.slider;

  

  

  //设置最大最小值
  slider.render({
    elem: '#slideTest1'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    console.log(value) ;//动态获取滑块数值
    v1=value;
  }
  });
 

slider.render({
    elem: '#slideTest2'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    console.log(value); //动态获取滑块数值
    v2=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest3'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    console.log(value) //动态获取滑块数值
    v3=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest4'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    console.log(value) //动态获取滑块数值
    v4=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest5'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    console.log(value) //动态获取滑块数值
    v5=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest6'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    // console.log(value) //动态获取滑块数值
    v6=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest7'
     ,step: 1 //步长
     ,value:5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    // console.log(value) //动态获取滑块数值
    v7=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest8'
     ,step: 1 //步长
     ,value:5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    // console.log(value) //动态获取滑块数值
    v8=value;
    //do something
  }
  });

slider.render({
    elem: '#slideTest9'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    // console.log(value) //动态获取滑块数值
    v9=value;
    console.log(v9);
    //do something
  }
  });

slider.render({
    elem: '#slideTest10'
     ,step: 1 //步长
     ,value: 5 //初始值
     ,min: 0 //最小值
     ,max: 10 //最大值
     ,showstep: true //开启间隔点
    ,change: function(value){
    // console.log(value) //动态获取滑块数值
    var v10=value;
        //do something
  }
  });

});
    
    
    // console.log(PostJSON);
    $('#PostButton').on('click',function(){
      if($("#select").val()==null){
      layer_index='all';
      }
      else {
        layer_index=$("#select").val();
      }
      var PostJSON={
      layer_idx:layer_index,
      num_semantics: "10", 
      step: v1+','+v2+','+v3+','+v4+','+v5+','+v6+','+v7+','+v8+','+v9+','+v10
    }
    console.log(PostJSON);
    // var step_val=v1+','+v2+','+v3+','+v4+','+v5+','+v6+','+v7+','+v8+','+v9+','+v10;
    // console.log(step_val);
    $('.toast').css({display: 'flex'})
      $.ajax({
         url: "http://localhost:8000/MaskApp/facemod/",
         type:'post',
        //  data:{
        // "layer_idx":layer_index,
        // "num_semantics": "10", 
        // "step": step_val
        // }, //参数
         data:PostJSON, 
         dataType:'JSON', 
        //  contentType:'application/json;charset=UTF-8', 
        // contentType:'multipart/form-data',
         success: function(res) {
          $('.toast').css({display: 'none'})
            var code = res["Error Code"].toString();
            var msg = res["Error Message"].toString();
            // var data = res["data"].toString();
            if(code =="1")
              console.log(msg);
            else  {
            picURL = res["data"].toString();
             //将图片的url设置给src
             $("#ImagePic").attr("src", picURL);
            //  localStorage.setItem('data',data);  //将变量PicURL(值为PicURL)存储至本地
            str="./match.html?PicURL="+picURL;
            console.log(str);
             console.log(msg);
            }
         },
         error:function(res){
             console.log('响应失败！');
         }
      })
    })

    $('#PostButton2').on('click',function(){
      if(str!=null)
      window.open(str);
      else window.open('./match.html');
    });





</script>


</body>
</html>